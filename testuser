from user import create_user, get_user, user_data, user_id_counter

def test_create_user():
    # Reset for test
    from user import user_data, user_id_counter, create_user
    user_data.clear()
    user_id_counter = 0

    user = create_user("alice", "alice@example.com")
    assert user.username == "alice"
    assert user.email == "alice@example.com"
    assert user.id == "1"  # first user created


def test_get_user():
    from user import user_data, user_id_counter, create_user, get_user
    user_data.clear()
    user_id_counter = 0

    user = create_user("bob", "bob@example.com")
    fetched = get_user(user.id)
    assert fetched == user